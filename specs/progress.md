# AutoVideoSlice å¼€å‘è¿›åº¦

> è®°å½•é¡¹ç›®å¼€å‘è¿›åº¦å’Œé‡Œç¨‹ç¢‘

---

## ğŸ“… è¿›åº¦æ¦‚è§ˆ

| é˜¶æ®µ              | çŠ¶æ€      | å¼€å§‹æ—¥æœŸ   | å®Œæˆæ—¥æœŸ   |
| ----------------- | --------- | ---------- | ---------- |
| è§„æ ¼æ–‡æ¡£          | âœ… å®Œæˆ   | 2025-12-15 | 2025-12-15 |
| Phase 1: åŸºç¡€æ¡†æ¶ | âœ… å®Œæˆ   | 2025-12-16 | 2025-12-16 |
| Phase 2: AI åˆ†æ  | ğŸŸ¢ è¿›è¡Œä¸­ | 2025-12-16 | -          |
| Phase 3: è§†é¢‘å¤„ç† | âšª å¾…å¼€å§‹ | -          | -          |
| Phase 4: UI ç¾åŒ–  | âšª å¾…å¼€å§‹ | -          | -          |

---

## ğŸ“ æ›´æ–°è®°å½•

### 2025-12-16

#### ä»»åŠ¡ 1.1.1ï¼šåˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„ âœ…

**åˆ›å»ºçš„æ–‡ä»¶å’Œç›®å½•**ï¼š

| è·¯å¾„                           | è¯´æ˜             |
| ------------------------------ | ---------------- |
| `backend/__init__.py`          | åç«¯åŒ…å…¥å£       |
| `backend/api/__init__.py`      | API è·¯ç”±æ¨¡å—     |
| `backend/services/__init__.py` | ä¸šåŠ¡é€»è¾‘æœåŠ¡å±‚   |
| `backend/models/__init__.py`   | æ•°æ®æ¨¡å‹å®šä¹‰     |
| `output/.gitkeep`              | è§†é¢‘å¯¼å‡ºç›®å½•å ä½ |
| `README.md`                    | é¡¹ç›®è¯´æ˜æ–‡æ¡£     |
| `.gitignore`                   | Git å¿½ç•¥è§„åˆ™     |

**éªŒè¯å‘½ä»¤**ï¼š

```powershell
Get-ChildItem -Recurse -Name d:\Coding\ai_pro\AutoVideoSlice
```

#### ä»»åŠ¡ 1.1.2ï¼šåˆå§‹åŒ– Python è™šæ‹Ÿç¯å¢ƒ âœ…

- **å·¥å…·**: uv
- **Python ç‰ˆæœ¬**: 3.11.8
- **è™šæ‹Ÿç¯å¢ƒè·¯å¾„**: `backend/.venv`

#### ä»»åŠ¡ 1.1.3ï¼šåˆ›å»º pyproject.toml âœ…

**å®‰è£…çš„ä¾èµ–**ï¼ˆ26 ä¸ªåŒ…ï¼‰ï¼š

| ç±»åˆ«        | åŒ…å                        |
| ----------- | --------------------------- |
| Web æ¡†æ¶    | fastapi, uvicorn, starlette |
| æ•°æ®éªŒè¯    | pydantic, pydantic-settings |
| å­—å¹•è§£æ    | pysrt, webvtt-py            |
| è§†é¢‘å¤„ç†    | ffmpeg-python               |
| HTTP å®¢æˆ·ç«¯ | httpx                       |

#### ä»»åŠ¡ 1.1.4ï¼šåˆå§‹åŒ–å‰ç«¯é¡¹ç›® âœ…

- **å·¥å…·**: Vite 7.3.0 + React
- **ç›®å½•**: `frontend/`
- **éªŒè¯**: `npm run dev` â†’ `http://localhost:5173/`

---

### 2025-12-15

- âœ… åˆ›å»º `requirements.md` éœ€æ±‚æ–‡æ¡£
- âœ… åˆ›å»º `plan.md` æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£
- âœ… ç¡®å®š AI æ¨¡å‹ï¼šè±†åŒ… doubao-1.5-pro-32k (äº‘ç«¯) + qwen3:4b (æœ¬åœ°)
- âœ… æ·»åŠ å¼€å‘è§„èŒƒï¼ˆæ¨¡å—åŒ–ã€è™šæ‹Ÿç¯å¢ƒè¦æ±‚ï¼‰
- âœ… åˆ›å»º `progress.md` è¿›åº¦æ–‡æ¡£
- âœ… åˆ›å»º `tasks.md` ä»»åŠ¡åˆ†è§£æ–‡æ¡£

---

## Phase 1.2 åç«¯åŸºç¡€ âœ…

### ä»»åŠ¡ 1.2.1-1.2.4ï¼šFastAPI åç«¯åŸºç¡€è®¾æ–½

**åˆ›å»ºçš„æ–‡ä»¶**ï¼š

| æ–‡ä»¶           | ä½œç”¨                             |
| -------------- | -------------------------------- |
| `config.py`    | é…ç½®ç®¡ç†ï¼Œpydantic-settings å®ç° |
| `main.py`      | FastAPI å…¥å£ï¼Œå« CORS å’Œå¥åº·æ£€æŸ¥ |
| `.env.example` | ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶                 |

**éªŒè¯ç»“æœ**ï¼š

```json
GET /health â†’ {"status": "healthy", "app": "AutoVideoSlice", "version": "0.1.0"}
```

---

## Phase 1.3 å­—å¹•è§£ææ¨¡å— âœ…

### ä»»åŠ¡ 1.3.1-1.3.4ï¼šå­—å¹•è§£æåŠŸèƒ½

**åˆ›å»ºçš„æ–‡ä»¶**ï¼š

| æ–‡ä»¶                   | ä½œç”¨                                                       |
| ---------------------- | ---------------------------------------------------------- |
| `models/subtitle.py`   | å­—å¹•æ•°æ®æ¨¡å‹ï¼ˆSubtitleEntry, SubtitleData, è¯·æ±‚/å“åº”æ¨¡å‹ï¼‰ |
| `services/subtitle.py` | SRT/VTT è§£æå™¨å®ç°ï¼ˆSRTParser, VTTParserï¼‰                 |
| `api/subtitle.py`      | å­—å¹• API è·¯ç”±ï¼ˆ/parse, /upload, /formatsï¼‰                 |

**æ¨¡å—ä¾èµ–å…³ç³»**ï¼š

```
api/subtitle.py
    â”œâ”€â”€ models/subtitle.py (æ•°æ®ç»“æ„)
    â””â”€â”€ services/subtitle.py (è§£æé€»è¾‘)
            â””â”€â”€ models/subtitle.py
```

**éªŒè¯ç»“æœ**ï¼š

- `/api/subtitle/upload` ä¸Šä¼  SRT æ–‡ä»¶ â†’ æˆåŠŸè§£æ 65 æ¡å­—å¹•
- æ”¯æŒå¤šç§ç¼–ç ï¼ˆUTF-8, GBK, GB2312ï¼‰

---

## Phase 1.4 å‰ç«¯åŸºç¡€ âœ…

### ä»»åŠ¡ 1.4.1-1.4.4ï¼šå‰ç«¯åŸºç¡€è®¾æ–½

**åˆ›å»ºçš„æ–‡ä»¶**ï¼š

| æ–‡ä»¶                        | ä½œç”¨                                     |
| --------------------------- | ---------------------------------------- |
| `index.css`                 | Apple é£æ ¼è®¾è®¡ç³»ç»Ÿï¼ˆCSS å˜é‡ã€ç»„ä»¶æ ·å¼ï¼‰ |
| `components/Layout.jsx`     | é¡µé¢å¸ƒå±€ç»„ä»¶ï¼ˆheader/main/footerï¼‰       |
| `components/Layout.css`     | å¸ƒå±€æ ·å¼                                 |
| `components/FileUpload.jsx` | æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ï¼ˆæ”¯æŒæ‹–æ‹½ï¼‰                 |
| `components/FileUpload.css` | ä¸Šä¼ ç»„ä»¶æ ·å¼                             |
| `services/api.js`           | åç«¯ API æœåŠ¡å°è£…                        |
| `App.jsx`                   | ä¸»åº”ç”¨ç»„ä»¶                               |
| `App.css`                   | åº”ç”¨æ ·å¼                                 |

**å‰ç«¯æ¶æ„**ï¼š

```
src/
â”œâ”€â”€ components/     # å¯å¤ç”¨ UI ç»„ä»¶
â”œâ”€â”€ services/       # API æœåŠ¡å±‚
â”œâ”€â”€ App.jsx         # ä¸»åº”ç”¨
â””â”€â”€ index.css       # è®¾è®¡ç³»ç»Ÿ
```

**éªŒè¯ç»“æœ**ï¼š

- ä¸Šä¼  SRT æ–‡ä»¶ â†’ æˆåŠŸè°ƒç”¨åç«¯ API è§£æ
- Apple ç®€çº¦é£æ ¼ UI å±•ç¤ºæ­£ç¡®

---

## Phase 2.1 AI æœåŠ¡æŠ½è±¡å±‚ âœ…

### ä»»åŠ¡ 2.1.1-2.1.4ï¼šAI æœåŠ¡æ¨¡å—

**åˆ›å»ºçš„æ–‡ä»¶**ï¼š

| æ–‡ä»¶                     | ä½œç”¨                        |
| ------------------------ | --------------------------- |
| `services/ai/base.py`    | AI æœåŠ¡åŸºç±»ï¼ˆç»Ÿä¸€æ¥å£å®šä¹‰ï¼‰ |
| `services/ai/ollama.py`  | Ollama æœ¬åœ°æ¨¡å‹å®¢æˆ·ç«¯       |
| `services/ai/doubao.py`  | è±†åŒ…äº‘ç«¯ API å®¢æˆ·ç«¯         |
| `services/ai/manager.py` | AI ç®¡ç†å™¨ï¼ˆè‡ªåŠ¨åˆ‡æ¢é€»è¾‘ï¼‰   |
| `api/ai.py`              | AI çŠ¶æ€æ£€æŸ¥å’Œæµ‹è¯• API       |

**æ¶æ„è®¾è®¡**ï¼š

```
AIManager (ç®¡ç†å™¨)
    â”œâ”€â”€ OllamaService (æœ¬åœ°æ¨¡å‹)
    â””â”€â”€ DoubaoService (äº‘ç«¯ API)
            â†“
      BaseAIService (åŸºç±»æ¥å£)
```

**åˆ‡æ¢ç­–ç•¥**ï¼š

- `local_first`: ä¼˜å…ˆæœ¬åœ°ï¼Œå›é€€äº‘ç«¯ï¼ˆé»˜è®¤ï¼‰
- `cloud_first`: ä¼˜å…ˆäº‘ç«¯ï¼Œå›é€€æœ¬åœ°
- `local_only` / `cloud_only`: ä»…ä½¿ç”¨å•ä¸€æ¥æº

**éªŒè¯ç»“æœ**ï¼š

- Ollama (qwen3:4b) âœ…
- è±†åŒ… (doubao-1-5-pro-32k-250115) âœ…

---

## ğŸ¯ ä¸‹ä¸€æ­¥ (Phase 2.2 å†…å®¹åˆ†æ)

- [ ] 2.2.1 è®¾è®¡é«˜å…‰æå– Prompt
- [ ] 2.2.2 å®ç°é«˜å…‰ç‰‡æ®µæå–é€»è¾‘
- [ ] 2.2.3 åˆ›å»ºåˆ†æç»“æœæ•°æ®æ¨¡å‹
- [ ] 2.2.4 åˆ›å»ºåˆ†æ API

---

_æœ€åæ›´æ–°: 2025-12-16_
